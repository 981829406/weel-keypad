{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["import './src/styles/demo.scss'\r\n\r\n/* global Keypad */\r\nKeypad.isMobile = /Mobile/.test(navigator.userAgent)\r\n\r\n// setTimeout(() => (document.querySelector('main').scrollTop = 10000), 200)\r\n\r\ndemo('base', () => {\r\n  var kypd = new Keypad()\r\n\r\n  return kypd\r\n})\r\n\r\ndemo('listen', () => {\r\n  var kypd = new Keypad({\r\n    el: '#listened-input'\r\n  })\r\n\r\n  return kypd\r\n})\r\n\r\ndemo('input', () => {\r\n  var password = document.querySelector('#password')\r\n  var items = password.querySelectorAll('i')\r\n\r\n  var input = document.querySelector('#readonly-input')\r\n  var kypd = new Keypad({\r\n    input: input,\r\n    onend: function (key) {\r\n      var code = key[2]\r\n      var n = input.value.length + 1\r\n\r\n      if (code === 'backspace') {\r\n        n--\r\n\r\n        if (n === 0) return kypd.hide()\r\n        if (n > items.length) n = items.length - 1\r\n\r\n        items[n - 1].classList.remove('on')\r\n\r\n        return false\r\n      }\r\n\r\n      if (n > items.length) {\r\n        kypd.hide()\r\n        return true\r\n      }\r\n\r\n      if (n === items.length) {\r\n        items[n - 1].classList.add('on')\r\n        return kypd.hide()\r\n      }\r\n\r\n      items[n - 1].classList.add('on')\r\n    }\r\n  })\r\n\r\n  password.addEventListener('click', ev => kypd.show(), false)\r\n\r\n  return kypd\r\n})\r\n\r\ndemo('options', () => {\r\n  var kypd = new Keypad(function (options) {\r\n    options.dark = true\r\n    options.name = 'qwer'\r\n    options.hide = 'click'\r\n\r\n    options.onstart = function (key) {\r\n      id('options-print-1').textContent = key[0]\r\n      id('options-print-2').textContent = key[1]\r\n      id('options-print-3').textContent = key[2]\r\n    }\r\n\r\n    return options\r\n  })\r\n\r\n  var theme = {\r\n    dark: id('theme-color-1'),\r\n    light: id('theme-color-2')\r\n  }\r\n\r\n  Object.entries(theme).forEach(function (action) {\r\n    var name = action[0]\r\n    var target = action[1]\r\n\r\n    target.addEventListener('click', function (ev) {\r\n      ev.stopPropagation()\r\n      target.querySelector('input[name]').click()\r\n\r\n      kypd.dark(name === 'dark')\r\n    }, false)\r\n  })\r\n\r\n  var control = {\r\n    toggle: id('control-1'),\r\n    show: id('control-2'),\r\n    hide: id('control-3')\r\n  }\r\n\r\n  Object.entries(control).forEach(function (action) {\r\n    var name = action[0]\r\n    var target = action[1]\r\n\r\n    target.addEventListener('click', function (ev) {\r\n      ev.stopPropagation()\r\n\r\n      var layout = document.querySelector('input[name=\"layout\"][checked]').value\r\n\r\n      kypd[name](layout)\r\n    }, false)\r\n  })\r\n\r\n  var layout = {\r\n    number: id('layout-1'),\r\n    qwer: id('layout-2')\r\n  }\r\n\r\n  Object.entries(layout).forEach(function (action) {\r\n    var name = action[0]\r\n    var target = action[1]\r\n\r\n    target.addEventListener('click', function (ev) {\r\n      ev.stopPropagation()\r\n\r\n      target.querySelector('input[name]').click()\r\n\r\n      kypd.hide(name === 'number' ? 'qwer' : 'number')\r\n      kypd.show(name)\r\n    }, false)\r\n  })\r\n\r\n  function id (id) {\r\n    return document.querySelector('#' + id)\r\n  }\r\n}, false)\r\n\r\ndemo('wasd', () => {\r\n  var kypd = new Keypad({\r\n    name: 'wasd',\r\n    multiple: false,\r\n    reducer: {\r\n      content: function (target) {\r\n        target.style.maxWidth = '240px'\r\n        return target\r\n      },\r\n      key: function (target, key) {\r\n        if (key[1] === '') {\r\n          target.textContent = ''\r\n          target.style.height = '0'\r\n          target.style.padding = '0'\r\n        }\r\n        return target\r\n      }\r\n    }\r\n  }, {\r\n    wasd: [\r\n      [[''], ['↑'], ['']],\r\n      [['←'], ['↓'], ['→']]\r\n    ]\r\n  })\r\n\r\n  return kypd\r\n})\r\n\r\ndemo('plugins', () => {\r\n  function pluginDemo () {\r\n    var style = document.createElement('style')\r\n    var css = [\r\n      'kypd-flex-toolbar {',\r\n      'background-color: #f5f5f5;',\r\n      'height: 56px; width: 100%;',\r\n      'margin-bottom: 8px;',\r\n      'display: flex; align-items: center; justify-content: flex-end;',\r\n      '}',\r\n      'kypd-flex-toolbar .close {',\r\n      'background: white; color: #0077ff; margin: 0 12px; border-radius: 2px;',\r\n      'height: 44px; min-width: 64px; font-size: 14px; border: none;',\r\n      'display: flex;  flex: none; justify-content: center; align-items: center;',\r\n      '}',\r\n      'kypd-flex-toolbar .input {',\r\n      'background-color: white; border-radius: 2px;',\r\n      'font-size: 16px; color: #333; text-indent: .5em;',\r\n      'height: 44px; width: 100%; border: 0; padding: 0; margin-left: 12px;',\r\n      '}'\r\n    ].join('')\r\n\r\n    style.innerHTML = css\r\n    document.head.appendChild(style)\r\n\r\n    return function () {\r\n      this.options.reducer.container = function (target) {\r\n        var toolbar = document.createElement(this.prefix('elem', 'toolbar'))\r\n        var input = document.createElement('input')\r\n        var close = document.createElement('button')\r\n\r\n        input.type = 'text'\r\n        input.placeholder = 'Type Enter Key To Send.'\r\n        input.readOnly = true\r\n        input.classList.add('input')\r\n\r\n        this.input = input\r\n\r\n        close.textContent = 'Close'\r\n        close.classList.add('close')\r\n        close.addEventListener(this.events.start, function () { this.hide() }.bind(this), false)\r\n\r\n        toolbar.appendChild(input)\r\n        toolbar.appendChild(close)\r\n\r\n        target.insertBefore(toolbar, target.firstChild)\r\n\r\n        return target\r\n      }\r\n\r\n      this.options.reducer.key = function (target, key) {\r\n        if (key[2] === 'enter') {\r\n          target.addEventListener(this.events.end, ev => {\r\n            if (typeof this.options.onsend !== 'function') return true\r\n            this.options.onsend.call(key, this.input.value)\r\n          }, false)\r\n        }\r\n\r\n        return target\r\n      }\r\n    }\r\n  }\r\n\r\n  // Keypad.plugins = [\r\n  //   pluginDemo()\r\n  // ]\r\n\r\n  var kypd = new Keypad({\r\n    name: 'qwer',\r\n    onsend: function (content) {\r\n      document.querySelector('#plugins-input').value = content\r\n    },\r\n    inject: false\r\n  })\r\n\r\n  kypd.use(pluginDemo(), 'Demo Plugin')\r\n\r\n  kypd.inject()\r\n\r\n  return kypd\r\n})\r\n\r\nfunction demo (id, cb) {\r\n  const demo = document.querySelector(`#${id}`)\r\n\r\n  if (!demo) return false\r\n\r\n  const buttons = {\r\n    show: demo.querySelector('.js-show'),\r\n    hide: demo.querySelector('.js-hide'),\r\n    toggle: demo.querySelector('.js-toggle')\r\n  }\r\n\r\n  const keypad = cb.call(demo)\r\n\r\n  if (!keypad) return false\r\n\r\n  for (const [action, button] of Object.entries(buttons)) {\r\n    if (!button) continue\r\n\r\n    button.addEventListener('click', ev => {\r\n      ev.stopPropagation()\r\n      keypad[action]()\r\n    }, false)\r\n  }\r\n}\r\n"],"names":["Keypad","isMobile","test","navigator","userAgent","demo","kypd","password","document","querySelector","items","querySelectorAll","input","key","code","n","value","length","hide","classList","remove","add","addEventListener","show","options","dark","name","onstart","textContent","theme","id","entries","forEach","action","target","ev","stopPropagation","click","control","layout","style","maxWidth","height","padding","pluginDemo","createElement","css","join","innerHTML","head","appendChild","reducer","container","toolbar","prefix","close","type","placeholder","readOnly","events","start","bind","insertBefore","firstChild","end","onsend","call","content","use","inject","cb","buttons","keypad","button","Object"],"mappings":"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"}