!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Keypad=e()}(this,function(){"use strict";function t(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0});var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i={el:null,input:null,flex:!0,mobile:!0,onstart:null,onend:null,inject:document.body},a={numberPad:[[[7],[8],[9]],[[4],[5],[6]],[[1],[2],[3]],[["Delete",null,"backspace"],[0],["Â·","."]]]},o=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.options=Object.assign({},i,r),this.layouts=Object.assign({},a,n),this.input=this.options.input,this.inputValue=null,this.wrap=null;var o=this.options.el;o&&this.listen(o),this.inject()}return r(t,[{key:"prefix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elem",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.options.flex;return{elem:"kypd"+(void 0===r||r?"-flex":"")+"-"+(e||"span"),attr:"data-kypd-"+(e||"blank")}[t]}},{key:"generator",value:function(t){var e=this,r=document.createElement(this.prefix("elem","content")),i=document.createElement(this.prefix("elem","key")),a=document.createElement(this.prefix("elem","key-row")),o=!0,s=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var f=c.value,p=a.cloneNode(),d=function(t,r,n){var a=i.cloneNode();a.textContent=t,n&&a.setAttribute(e.prefix("attr","key-code"),n),(r||!r&&!n)&&a.setAttribute(e.prefix("attr","key-value"),r||t),a.setAttribute(e.prefix("attr","touch"),""),a.addEventListener(e.events.start,function(i){if((i.preventDefault(),i.stopPropagation(),a.setAttribute(e.prefix("attr","key-status"),"start"),"function"==typeof e.options.onstart)&&e.options.onstart.call(e,[t,r,n]))return!0},!1),a.addEventListener(e.events.end,function(i){i.preventDefault(),i.stopPropagation(),a.setAttribute(e.prefix("attr","key-status"),"");var o=i.currentTarget,s=o.getAttribute(e.prefix("attr","key-value")),l=o.getAttribute(e.prefix("attr","key-code"));if("function"==typeof e.options.onend&&e.options.onend.call(e,[t,r,n]))return!0;if(!e.input)return!0;var c=e.input.value,u=e.input.selectionStart;e.input.value&&"backspace"===l&&(c=c.slice(0,u-1)+c.slice(u),u--),s&&(c=c.slice(0,u)+s+c.slice(u),u++),e.input.value=c,e.input.selectionEnd=u},!1),p.appendChild(a)},y=!0,b=!1,h=void 0;try{for(var k,v=f[Symbol.iterator]();!(y=(k=v.next()).done);y=!0){var x=k.value,m=n(x,3);d(m[0],m[1],m[2])}}catch(t){b=!0,h=t}finally{try{!y&&v.return&&v.return()}finally{if(b)throw h}}r.appendChild(p)}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}return r}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layouts;var t=document.createElement(this.prefix("elem","wrap")),e=document.createElement(this.prefix("elem","container"));t.setAttribute(this.prefix("attr","status"),"none");var r=!0,i=!1,a=void 0;try{for(var o,s=Object.entries(this.layouts)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,c=n(l,2),u=c[0],f=c[1],p=this.generator(f);p.setAttribute(this.prefix("attr","name"),u),e.appendChild(p)}}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return t.appendChild(e),t.setAttribute(this.prefix("attr","status"),"ready"),this.wrap=t,t}},{key:"inject",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inject).appendChild(this.render())}},{key:"listen",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!r)return!1;var n=[];switch(t.istype(r)){case"string":n=document.querySelectorAll(r);break;case"nodelist":n=r;break;default:if(!/html\w*element/.test(t.istype(r)))return!1;n=[r]}if(!n||!n.length)return!1;Array.prototype.forEach.call(n,function(t){t.addEventListener("focus",function(t){e.wrap.setAttribute(e.prefix("attr","status"),"active"),e.input=t.currentTarget},!1),t.addEventListener("blur",function(t){e.wrap.setAttribute(e.prefix("attr","status"),"ready")},!1)})}},{key:"show",value:function(){this.wrap.setAttribute(this.prefix("attr","status"),"active")}},{key:"hide",value:function(){this.wrap.setAttribute(this.prefix("attr","status"),"ready")}},{key:"toggle",value:function(){"active"===this.wrap.getAttribute(this.prefix("attr","status"))?this.hide():this.show()}},{key:"events",get:function(){var t=this.options.mobile;return{start:t?"touchstart":"mousedown",end:t?"touchend":"mouseup",move:t?"touchmove":"mousemove"}}}],[{key:"istype",value:function(t,e){var r=Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase();return e?e===r:r}}]),t}();t("kypd-flex-wrap,kypd-wrap{width:100%;font-family:Arial,Helvetica,sans-serif;display:block;position:fixed;bottom:0;-webkit-transition:opacity .35s,visibility .35s,-webkit-transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,-webkit-transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,transform .25s cubic-bezier(.215,.61,.355,1),-webkit-transform .25s cubic-bezier(.215,.61,.355,1)}kypd-flex-wrap[data-kypd-status=none],kypd-wrap[data-kypd-status=none]{display:none}kypd-flex-wrap[data-kypd-status=ready],kypd-wrap[data-kypd-status=ready]{opacity:0;visibility:hidden;-webkit-transform:translateY(100%);transform:translateY(100%)}kypd-flex-wrap[data-kypd-status=active],kypd-wrap[data-kypd-status=active]{opacity:1;visibility:visible;-webkit-transform:translateY(0);transform:translateY(0)}kypd-flex-container{width:inherit;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}kypd-flex-container,kypd-flex-content{display:-webkit-box;display:-ms-flexbox;display:flex}kypd-flex-content{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kypd-flex-content[data-kypd-name=numberPad]{width:100%;max-width:240px}kypd-flex-key-row{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}kypd-flex-key,kypd-flex-key-row{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex}kypd-flex-key{height:48px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}");return t("kypd-flex-wrap,kypd-wrap{background:#fff}kypd-flex-container{border-top:1px solid #f5f5f5}kypd-flex-key{cursor:default;border-radius:10px;background:#fff;color:#07f;font-size:16px;-webkit-transition:background .25s cubic-bezier(.075,.82,.165,1),color .25s cubic-bezier(.175,.885,.32,1.275),border-radius .45s cubic-bezier(.175,.885,.32,1.275);transition:background .25s cubic-bezier(.075,.82,.165,1),color .25s cubic-bezier(.175,.885,.32,1.275),border-radius .45s cubic-bezier(.175,.885,.32,1.275)}kypd-flex-key[data-kypd-key-status=start]{border-radius:2px;background:#07f;color:#fff}"),o});
