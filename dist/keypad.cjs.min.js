"use strict";function __$$styleInject(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,i=new Array(r);r--;)i[r]=[e[r],t[e[r]]];return i}),Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},writable:!0,configurable:!0});var classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),defaultOptions={el:null,input:null,flex:!0,mobile:!0,onstart:null,onend:null,inject:document.body},defaultLayouts={numberPad:[[[7],[8],[9]],[[4],[5],[6]],[[1],[2],[3]],[["Delete",null,"backspace"],[0],["Â·","."]]]},Keypad=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,t),this.options=Object.assign({},defaultOptions,e),this.layouts=Object.assign({},defaultLayouts,r),this.input=this.options.input,this.inputValue=null,this.wrap=null;var i=this.options.el;i&&this.listen(i),this.inject()}return createClass(t,[{key:"prefix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elem",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.options.flex;return{elem:"kypd"+(void 0===r||r?"-flex":"")+"-"+(e||"span"),attr:"data-kypd-"+(e||"blank")}[t]}},{key:"generator",value:function(t){var e=this,r=document.createElement(this.prefix("elem","content")),i=document.createElement(this.prefix("elem","key")),n=document.createElement(this.prefix("elem","key-row")),a=!0,o=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,p=n.cloneNode(),d=function(t,r,n){var a=i.cloneNode();a.textContent=t,n&&a.setAttribute(e.prefix("attr","key-code"),n),(r||!r&&!n)&&a.setAttribute(e.prefix("attr","key-value"),r||t),a.setAttribute(e.prefix("attr","touch"),""),a.addEventListener(e.events.start,function(i){if((i.preventDefault(),i.stopPropagation(),a.setAttribute(e.prefix("attr","key-status"),"start"),"function"==typeof e.options.onstart)&&e.options.onstart.call(e,[t,r,n]))return!0},!1),a.addEventListener(e.events.end,function(i){i.preventDefault(),i.stopPropagation(),a.setAttribute(e.prefix("attr","key-status"),"");var o=i.currentTarget,s=o.getAttribute(e.prefix("attr","key-value")),l=o.getAttribute(e.prefix("attr","key-code"));if("function"==typeof e.options.onend&&e.options.onend.call(e,[t,r,n]))return!0;if(!e.input)return!0;var c=e.input.value,u=e.input.selectionStart;e.input.value&&"backspace"===l&&(c=c.slice(0,u-1)+c.slice(u),u--),s&&(c=c.slice(0,u)+s+c.slice(u),u++),e.input.value=c,e.input.selectionEnd=u},!1),p.appendChild(a)},f=!0,y=!1,b=void 0;try{for(var h,k=u[Symbol.iterator]();!(f=(h=k.next()).done);f=!0){var v=h.value,x=slicedToArray(v,3);d(x[0],x[1],x[2])}}catch(t){y=!0,b=t}finally{try{!f&&k.return&&k.return()}finally{if(y)throw b}}r.appendChild(p)}}catch(t){o=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return r}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layouts;var t=document.createElement(this.prefix("elem","wrap")),e=document.createElement(this.prefix("elem","container"));t.setAttribute(this.prefix("attr","status"),"none");var r=!0,i=!1,n=void 0;try{for(var a,o=Object.entries(this.layouts)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,l=slicedToArray(s,2),c=l[0],u=l[1],p=this.generator(u);p.setAttribute(this.prefix("attr","name"),c),e.appendChild(p)}}catch(t){i=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(i)throw n}}return t.appendChild(e),t.setAttribute(this.prefix("attr","status"),"ready"),this.wrap=t,t}},{key:"inject",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inject).appendChild(this.render())}},{key:"listen",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!r)return!1;var i=[];switch(t.istype(r)){case"string":i=document.querySelectorAll(r);break;case"nodelist":i=r;break;default:if(!/html\w*element/.test(t.istype(r)))return!1;i=[r]}if(!i||!i.length)return!1;Array.prototype.forEach.call(i,function(t){t.addEventListener("focus",function(t){e.wrap.setAttribute(e.prefix("attr","status"),"active"),e.input=t.currentTarget},!1),t.addEventListener("blur",function(t){e.wrap.setAttribute(e.prefix("attr","status"),"ready")},!1)})}},{key:"show",value:function(){this.wrap.setAttribute(this.prefix("attr","status"),"active")}},{key:"hide",value:function(){this.wrap.setAttribute(this.prefix("attr","status"),"ready")}},{key:"toggle",value:function(){"active"===this.wrap.getAttribute(this.prefix("attr","status"))?this.hide():this.show()}},{key:"events",get:function(){var t=this.options.mobile;return{start:t?"touchstart":"mousedown",end:t?"touchend":"mouseup",move:t?"touchmove":"mousemove"}}}],[{key:"istype",value:function(t,e){var r=Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase();return e?e===r:r}}]),t}(),css="kypd-flex-wrap,kypd-wrap{width:100%;font-family:Arial,Helvetica,sans-serif;display:block;position:fixed;bottom:0;-webkit-transition:opacity .35s,visibility .35s,-webkit-transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,-webkit-transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,transform .25s cubic-bezier(.215,.61,.355,1);transition:opacity .35s,visibility .35s,transform .25s cubic-bezier(.215,.61,.355,1),-webkit-transform .25s cubic-bezier(.215,.61,.355,1)}kypd-flex-wrap[data-kypd-status=none],kypd-wrap[data-kypd-status=none]{display:none}kypd-flex-wrap[data-kypd-status=ready],kypd-wrap[data-kypd-status=ready]{opacity:0;visibility:hidden;-webkit-transform:translateY(100%);transform:translateY(100%)}kypd-flex-wrap[data-kypd-status=active],kypd-wrap[data-kypd-status=active]{opacity:1;visibility:visible;-webkit-transform:translateY(0);transform:translateY(0)}kypd-flex-container{width:inherit;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}kypd-flex-container,kypd-flex-content{display:-webkit-box;display:-ms-flexbox;display:flex}kypd-flex-content{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kypd-flex-content[data-kypd-name=numberPad]{width:100%;max-width:240px}kypd-flex-key-row{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}kypd-flex-key,kypd-flex-key-row{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex}kypd-flex-key{height:48px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}";__$$styleInject(css);var css$2="kypd-flex-wrap,kypd-wrap{background:#fff}kypd-flex-container{border-top:1px solid #f5f5f5}kypd-flex-key{cursor:default;border-radius:10px;background:#fff;color:#07f;font-size:16px;-webkit-transition:background .25s cubic-bezier(.075,.82,.165,1),color .25s cubic-bezier(.175,.885,.32,1.275),border-radius .45s cubic-bezier(.175,.885,.32,1.275);transition:background .25s cubic-bezier(.075,.82,.165,1),color .25s cubic-bezier(.175,.885,.32,1.275),border-radius .45s cubic-bezier(.175,.885,.32,1.275)}kypd-flex-key[data-kypd-key-status=start]{border-radius:2px;background:#07f;color:#fff}";__$$styleInject(css$2),module.exports=Keypad;
